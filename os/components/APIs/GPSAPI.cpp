//**********************************************************************************************************************************
// Filename: GPSAPI.cpp
// Date: 10.08.2018
// Author: Jo√£o Pombas
// Company: LOKA SYSTEMS
// Version: 1.0
// Description: API used by GPSService component
//**********************************************************************************************************************************

//**********************************************************************************************************************************
//                                                      Includes Section
//**********************************************************************************************************************************
#include "../APIs/include/GPSAPI.h"

//**********************************************************************************************************************************
//                                                     External Functions
//**********************************************************************************************************************************


//**********************************************************************************************************************************
//                                                      Global Variables
//**********************************************************************************************************************************


//**********************************************************************************************************************************
//                                                        Code Section
//**********************************************************************************************************************************

//**********************************************************************************************************************************
// Header: GPSAPI::getTimeoutValues
// Function: Retrieves the GPS timeout values
//**********************************************************************************************************************************
void GPSAPI::getTimeoutValues(unsigned int* coldTimeout, unsigned int* warmTimeout){
	*coldTimeout = GPS_COLD_START_TIMEOUT;
	*warmTimeout = GPS_WARM_START_TIMEOUT;
}


//**********************************************************************************************************************************
// Header: GPSAPI::init
// Function: Inits the GPS component
//**********************************************************************************************************************************
void GPSAPI::init(){
	GPS_SIM33ELA::init();
}


//**********************************************************************************************************************************
// Header: GPSAPI::reset
// Function: Resets the GPS component
//**********************************************************************************************************************************
void GPSAPI::reset(){
	GPS_SIM33ELA::reset();
}


//**********************************************************************************************************************************
// Header: GPSAPI::gpsTurnON
// Function: Turns ON the GPS module
//**********************************************************************************************************************************
void GPSAPI::turnON(unsigned char auxParam){
	GPS_SIM33ELA::gpsTurnON(auxParam);
}


//**********************************************************************************************************************************
// Header: GPSAPI::gpsTurnOFF
// Function: Turns OFF the GPS module
//**********************************************************************************************************************************
void GPSAPI::turnOFF(){
	GPS_SIM33ELA::gpsBackupMode();
}


//**********************************************************************************************************************************
// Header: GPSAPI::getGPSCoordinates
// Function: Retrieves the GPS coordinates
//**********************************************************************************************************************************
bool GPSAPI::getGPSCoordinates(float* latitude, float* longitude, float* altitude, float* speed, int timeOut){
	return GPS_SIM33ELA::getGPSCoordinates(latitude, longitude, altitude, speed, timeOut);
}

//**********************************************************************************************************************************
// Header: GPSAPI::sendMessage
// Function: Called to sends a GPS message
//**********************************************************************************************************************************
void GPSAPI::sendMessage(double lat, double lng, double speed, double timestamp){
	Radio::turnOn();
	Radio::sendGPSPosition(lat, lng, speed, timestamp);	// Send Coordinates
	Radio::turnOff();
}
